<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Yuny — BI Online (Mobile Ready)</title>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
<script src="https://cdn.plot.ly/plotly-2.30.0.min.js"></script>
<style>
  :root { --gold:#D4AF37; --text:#111; --muted:#666; --border:#eee; --bg:#fff; }
  *{ box-sizing: border-box; }
  html,body{ margin:0; padding:0; background:var(--bg); color:var(--text); font-family: Inter, -apple-system, Segoe UI, Roboto, Arial, sans-serif;}
  .wrap{ max-width:1100px; margin:0 auto; padding:20px 16px 28px; }
  header{ display:flex; align-items:center; justify-content:space-between; gap:16px; margin-bottom:16px; }
  .brand{ display:flex; align-items:center; gap:12px; }
  .brand h1{ font-size:20px; margin:0; letter-spacing:.2px; }
  .pill{ background:rgba(212,175,55,0.08); color:var(--gold); border:1px solid rgba(212,175,55,0.3); padding:6px 10px; border-radius:999px; font-size:12px; white-space:nowrap; }
  .kpis{ display:grid; grid-template-columns:repeat(4,1fr); gap:12px; margin:10px 0 18px; }
  .kpi{ border:1px solid var(--border); border-radius:12px; padding:12px; background:#fff; }
  .kpi .label{ color:#777; font-size:12px; }
  .kpi .value{ font-weight:800; font-size:18px; }
  .grid{ display:grid; grid-template-columns: 1.2fr 1fr; gap:20px; }
  .grid-2{ display:grid; grid-template-columns: 1fr 1fr; gap:20px; margin-top:20px; }
  .card{ border:1px solid var(--border); border-radius:12px; padding:14px; background:#fff; }
  h2{ font-size:16px; margin:0 0 8px 0; }
  .table-wrap{ width:100%; overflow-x:auto; }
  table{ width:100%; border-collapse:collapse; min-width:420px; }
  th, td{ padding:10px 12px; border-bottom:1px solid var(--border); text-align:left; }
  th{ color:#555; font-size:12px; letter-spacing:.02em; }
  tfoot td{ font-weight:700; }
  footer{ margin-top:22px; display:flex; align-items:center; justify-content:space-between; font-size:12px; color:var(--muted); gap:12px; flex-wrap:wrap; }
  .gold{ color:var(--gold); }
  .hint{ font-size:12px; color:#777; margin-top:6px; }

  /* —— Mobile —— */
  @media (max-width: 900px){
    .grid{ grid-template-columns: 1fr; }
    .grid-2{ grid-template-columns: 1fr; }
  }
  @media (max-width: 680px){
    header{ flex-wrap:wrap; }
    .brand h1{ font-size:18px; }
    .kpis{ grid-template-columns: repeat(2,1fr); }
  }
  @media (max-width: 420px){
    .kpis{ grid-template-columns: 1fr; }
    .kpi .value{ font-size:17px; }
    .wrap{ padding:16px 12px 24px; }
  }
</style>
</head>
<body>
<div class="wrap">
  <header>
    <div class="brand">
      <div style="width:16px;height:16px;border-radius:4px;background:linear-gradient(135deg,#D4AF37,#f0d98a);box-shadow:0 0 0 1px rgba(212,175,55,.35),0 6px 18px rgba(212,175,55,.22)"></div>
      <h1>Performance Online — Yuny (Março a Outubro 2025)</h1>
    </div>
    <span class="pill">BI Interativo • Mobile</span>
  </header>

  <section class="kpis">
    <div class="kpi"><div class="label">VGV acumulado</div><div class="value" id="vgvTotal"></div></div>
    <div class="kpi"><div class="label">Investimento (mídia + estrutura)</div><div class="value" id="invest"></div></div>
    <div class="kpi"><div class="label">ROI total</div><div class="value" id="roi"></div></div>
    <div class="kpi"><div class="label">Pico mensal</div><div class="value" id="pico"></div></div>
  </section>

  <div class="grid">
    <div class="card">
      <h2>Evolução Mensal do VGV Online</h2>
      <div id="line"></div>
      <div class="hint">* Os valores (VGV) aparecem acima de cada ponto. Em telas muito pequenas, a fonte reduz para evitar sobreposição.</div>
    </div>
    <div class="card">
      <h2>Resultados por Mês</h2>
      <div class="table-wrap">
        <table>
          <thead><tr><th>Mês</th><th style="text-align:right">VGV (R$)</th></tr></thead>
          <tbody>
            <tr><td>Março</td><td class='val' data-num='961968' style="text-align:right"></td></tr>
            <tr><td>Abril</td><td class='val' data-num='1294520' style="text-align:right"></td></tr>
            <tr><td>Maio</td><td class='val' data-num='1495000' style="text-align:right"></td></tr>
            <tr><td>Junho</td><td class='val' data-num='10287000' style="text-align:right"></td></tr>
            <tr><td>Julho</td><td class='val' data-num='1643312' style="text-align:right"></td></tr>
            <tr><td>Agosto</td><td class='val' data-num='3950000' style="text-align:right"></td></tr>
            <tr><td>Setembro</td><td class='val' data-num='15319600' style="text-align:right"></td></tr>
            <tr><td>Outubro</td><td class='val' data-num='52619600' style="text-align:right"></td></tr>
          </tbody>
          <tfoot>
            <tr><td>Total</td><td id="totalVgv" style="text-align:right"></td></tr>
          </tfoot>
        </table>
      </div>
    </div>
  </div>

  <div class="grid-2">
    <div class="card">
      <h2>Mix de Produtos por Mês</h2>
      <div class="select-row" style="display:flex;gap:8px;align-items:center;margin:8px 0 10px 0;">
        <label for="mesSel">Mês:</label>
        <select id="mesSel" style="padding:8px 10px;border:1px solid var(--border);border-radius:8px"></select>
      </div>
      <div id="pie"></div>
    </div>
    <div class="card">
      <h2>Observações</h2>
      <p style="color:#555; line-height:1.5; margin:0">
        • Outubro marca o pico do período com forte contribuição de Quaddra Lorena e 155 Jerônimo.<br/>
        • Crescimento sustentado após julho indica ganho de tração do digital.<br/>
        • ROI considera investimento total (mídia + estrutura).
      </p>
    </div>
  </div>

  <footer>
    <div>Fonte: Squad Yuny — CRM & Mídia Digital</div>
    <div>Atualizado com Outubro = <span class="gold">R$ 52.619.600</span></div>
  </footer>
</div>

<script>
  // --------- DADOS (edite aqui se precisar) ----------
  const months = ["Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro"];
  const vgvVals = [961968,1294520,1495000,10287000,1643312,3950000,15319600,52619600];
  const mixData = {
    "Março": {"Camino Alto da Boa Vista": 2},
    "Abril": {"Camino Residencial": 1, "Zip Brooklin": 1},
    "Maio": {"Camino Residencial": 1, "Camino Studio": 1, "Zip Brooklin": 1},
    "Junho": {"Zip Brooklin": 3, "Quaddra Lorena": 1},
    "Julho": {"Jardim Sul": 1, "Camino Upgrade": 1, "Camino Residencial": 2},
    "Agosto": {"Organy Essencial": 2, "Camino Residencial": 1},
    "Setembro": {"Quaddra Lorena": 1, "Zip Brooklin": 1},
    "Outubro": {"Quaddra Lorena": 3, "Organy Essencial": 1, "Zip Brooklin": 1, "155 Jerônimo": 3}
  };
  const invest = 1291720;
  // ---------------------------------------------------

  const total = vgvVals.reduce((a,b)=>a+b,0);
  const roi = (total - invest) / invest;
  const brl = (n) => "R$ " + Math.round(n).toLocaleString('pt-BR');

  // KPIs
  document.getElementById('vgvTotal').innerText = brl(total);
  document.getElementById('invest').innerText = brl(invest);
  document.getElementById('roi').innerText = roi.toFixed(1) + "x";
  document.getElementById('pico').innerText = "Outubro — " + brl(vgvVals[vgvVals.length-1]);

  // Tabela
  document.querySelectorAll('td.val').forEach(td => {
    const n = parseFloat(td.getAttribute('data-num'))||0;
    td.textContent = brl(n);
  });
  document.getElementById('totalVgv').textContent = brl(total);

  // Responsividade de labels (fonte e posição)
  function labelStyle(){
    const w = window.innerWidth;
    if (w <= 420) return { size: 9, pos: 'top center' };
    if (w <= 680) return { size: 10, pos: 'top center' };
    return { size: 11, pos: 'top center' };
  }
  const labelsBRL = (vals) => vals.map(v => "R$ " + Math.round(v).toLocaleString('pt-BR'));

  // Line chart (com labels)
  function drawLine(){
    const sty = labelStyle();
    Plotly.newPlot('line', [{
      x: months,
      y: vgvVals,
      text: labelsBRL(vgvVals),
      textposition: sty.pos,
      textfont: { size: sty.size, color: '#444' },
      type: 'scatter',
      mode: 'lines+markers+text',
      line: { color: '#D4AF37', width: 4 },
      marker: { size: 8 }
    }], {
      margin: { t: 10, r: 10, b: 40, l: 50 },
      xaxis: { tickangle: -15 },
      yaxis: { tickformat: ',d', gridcolor: 'rgba(0,0,0,0.1)' }
    }, { displayModeBar:false, responsive:true });
  }
  drawLine();
  window.addEventListener('resize', drawLine);

  // Pie (mix de produtos)
  const sel = document.getElementById('mesSel');
  months.forEach(m => { const o = document.createElement('option'); o.value=m; o.textContent=m; sel.appendChild(o); });
  sel.value = 'Outubro';

  function drawPie(month){
    const obj = mixData[month] || {};
    const labels = Object.keys(obj);
    const values = Object.values(obj);
    if (!labels.length) {
      Plotly.newPlot('pie', [{labels:['Sem dados'], values:[1], type:'pie', marker:{colors:['#eee']}}],
        {margin:{t:10,r:10,b:10,l:10}}, {displayModeBar:false, responsive:true});
      return;
    }
    const labWithQty = labels.map((l,i) => l + " (" + values[i] + ")");
    Plotly.newPlot('pie', [{
      labels: labWithQty,
      values: values,
      type: 'pie',
      marker: {colors: ['#D4AF37','#B0A170','#E1C699','#8C7853','#EEE8AA','#C8B88A','#D9C89E','#BDA55D']},
      textinfo: 'percent'
    }], { margin:{t:10,r:10,b:10,l:10} }, { displayModeBar:false, responsive:true });
  }
  drawPie(sel.value);
  sel.addEventListener('change', e => drawPie(e.target.value));
</script>
</body>
</html>